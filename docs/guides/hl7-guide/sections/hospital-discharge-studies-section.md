# Hospital Discharge Studies Summary Section

**Template ID:** 2.16.840.1.113883.10.20.22.2.16
**Version:** No specific version extension
**Badge:** Hospital Section

## Overview

The Hospital Discharge Studies Summary Section records the results of observations generated by laboratories, imaging procedures, and other diagnostic studies performed at or near the time of discharge. This section provides a summary of key diagnostic findings relevant to the patient's discharge, including laboratory tests, imaging studies, and other procedures that inform post-discharge care.

### Clinical Purpose and Context

The Hospital Discharge Studies Summary documents:
- Laboratory test results at discharge (hematology, chemistry, etc.)
- Imaging procedure results (X-ray, CT, MRI, ultrasound, etc.)
- Diagnostic procedure findings (echocardiography, nuclear medicine, etc.)
- Pathology results relevant to discharge
- Other diagnostic observations performed during hospitalization

This section helps receiving providers understand the patient's status at discharge and guides ongoing care and follow-up testing needs.

### When to Include

The Hospital Discharge Studies Summary Section is typically included in:
- **Discharge Summaries** (primary use case)
- **Transfer Summaries**
- **Continuity of Care Documents for hospitalized patients**

This section is particularly valuable when discharge test results differ from admission values or when they inform follow-up care decisions.

## Template Details

### Official OID
- **Root:** 2.16.840.1.113883.10.20.22.2.16
- **Extension:** None specified

### Conformance Level
- **Conformance:** MAY (Optional)
- **Section Code:** 11493-4 (LOINC - "Hospital Discharge Studies Summary")

### Cardinality
- **Section:** 0..1 (Optional)
- **Entries:** 0..* (Result Organizer entries grouping related studies)

### Related Templates
- **Result Organizer (V3):** 2.16.840.1.113883.10.20.22.4.1:2015-08-01
- **Result Observation (V3):** 2.16.840.1.113883.10.20.22.4.2:2015-08-01

## Protocol Requirements

The section uses two protocols: one for individual studies and one for study organizers (panels).

### DischargeStudyObservationProtocol

Each individual study observation must provide:

| Property | Type | Description |
|----------|------|-------------|
| `study_name` | `str` | Name of the study/test |
| `study_code` | `str` | LOINC code for the study |
| `value` | `str` | Measured value (numeric or text) |
| `status` | `str` | Status: 'completed', 'preliminary', 'final' |
| `effective_time` | `date\|datetime` | When study was performed |

### Optional Study Properties

| Property | Type | Description |
|----------|------|-------------|
| `unit` | `Optional[str]` | Unit of measurement |
| `value_type` | `Optional[str]` | 'PQ', 'CD', or 'ST' |
| `interpretation` | `Optional[str]` | 'N' (normal), 'A' (abnormal), etc. |
| `reference_range_low` | `Optional[str]` | Lower bound of reference range |
| `reference_range_high` | `Optional[str]` | Upper bound of reference range |
| `reference_range_unit` | `Optional[str]` | Unit for reference range |

### DischargeStudyOrganizerProtocol

Study organizers (panels) must provide:

| Property | Type | Description |
|----------|------|-------------|
| `study_panel_name` | `str` | Name of the panel |
| `study_panel_code` | `str` | LOINC code for the panel |
| `status` | `str` | Status of the organizer |
| `effective_time` | `date\|datetime` | When panel was collected/performed |
| `studies` | `Sequence` | List of study observations in panel |

## Code Example

Here's a complete working example using ccdakit to create a Hospital Discharge Studies Summary Section:

```python
from datetime import datetime
from ccdakit.builders.sections.discharge_studies import HospitalDischargeStudiesSummarySection
from ccdakit.core.base import CDAVersion

# Define individual study observations
class StudyObservation:
    def __init__(self, name, code, value, unit=None, interpretation=None,
                 ref_low=None, ref_high=None, effective_time=None):
        self.study_name = name
        self.study_code = code
        self.value = value
        self.unit = unit
        self.status = "final"
        self.effective_time = effective_time or datetime(2024, 10, 20, 8, 0)
        self.value_type = "PQ" if unit else "ST"
        self.interpretation = interpretation
        self.reference_range_low = ref_low
        self.reference_range_high = ref_high
        self.reference_range_unit = unit

# Define study organizer (panel)
class StudyOrganizer:
    def __init__(self, panel_name, panel_code, studies, effective_time):
        self.study_panel_name = panel_name
        self.study_panel_code = panel_code
        self.status = "completed"
        self.effective_time = effective_time
        self.studies = studies

# Create Complete Blood Count panel
cbc_studies = [
    StudyObservation(
        name="Hemoglobin",
        code="718-7",  # LOINC
        value="13.5",
        unit="g/dL",
        interpretation="N",
        ref_low="13.0",
        ref_high="17.0"
    ),
    StudyObservation(
        name="White Blood Cell Count",
        code="6690-2",  # LOINC
        value="8.2",
        unit="10*3/uL",
        interpretation="N",
        ref_low="4.5",
        ref_high="11.0"
    ),
    StudyObservation(
        name="Platelet Count",
        code="777-3",  # LOINC
        value="220",
        unit="10*3/uL",
        interpretation="N",
        ref_low="150",
        ref_high="400"
    )
]

cbc_organizer = StudyOrganizer(
    panel_name="Complete Blood Count",
    panel_code="58410-2",  # LOINC for CBC panel
    studies=cbc_studies,
    effective_time=datetime(2024, 10, 20, 8, 0)
)

# Create Metabolic Panel
metabolic_studies = [
    StudyObservation(
        name="Glucose",
        code="2345-7",  # LOINC
        value="95",
        unit="mg/dL",
        interpretation="N",
        ref_low="70",
        ref_high="100"
    ),
    StudyObservation(
        name="Creatinine",
        code="2160-0",  # LOINC
        value="1.1",
        unit="mg/dL",
        interpretation="N",
        ref_low="0.7",
        ref_high="1.3"
    ),
    StudyObservation(
        name="Sodium",
        code="2951-2",  # LOINC
        value="140",
        unit="mmol/L",
        interpretation="N",
        ref_low="136",
        ref_high="145"
    ),
    StudyObservation(
        name="Potassium",
        code="2823-3",  # LOINC
        value="4.2",
        unit="mmol/L",
        interpretation="N",
        ref_low="3.5",
        ref_high="5.1"
    )
]

metabolic_organizer = StudyOrganizer(
    panel_name="Basic Metabolic Panel",
    panel_code="51990-0",  # LOINC
    studies=metabolic_studies,
    effective_time=datetime(2024, 10, 20, 8, 0)
)

# Create Chest X-Ray result
imaging_studies = [
    StudyObservation(
        name="Chest X-Ray Findings",
        code="36643-5",  # LOINC
        value="No acute cardiopulmonary process. Normal heart size. Clear lungs.",
        unit=None
    )
]

imaging_organizer = StudyOrganizer(
    panel_name="Chest X-Ray",
    panel_code="36643-5",  # LOINC
    studies=imaging_studies,
    effective_time=datetime(2024, 10, 19, 14, 30)
)

# Build the Hospital Discharge Studies Summary Section
section_builder = HospitalDischargeStudiesSummarySection(
    study_organizers=[cbc_organizer, metabolic_organizer, imaging_organizer],
    title="Hospital Discharge Studies Summary",
    version=CDAVersion.R2_1
)

# Generate XML element
section_element = section_builder.build()

# Convert to XML string (for demonstration)
from lxml import etree
xml_string = etree.tostring(section_element, pretty_print=True, encoding='unicode')
print(xml_string)
```

## Official Reference

For complete specification details, refer to the official HL7 C-CDA R2.1 documentation:
- [HL7 C-CDA R2.1 Implementation Guide](http://www.hl7.org/implement/standards/product_brief.cfm?product_id=492)
- Section: Hospital Discharge Studies Summary Section

## Best Practices

### Common Patterns

1. **Group Related Studies**
   - Use organizers (panels) to group related tests
   - Complete Blood Count (CBC) - all blood cell counts together
   - Basic/Comprehensive Metabolic Panel - chemistry values together
   - Imaging by modality - all chest X-rays together

2. **Include Reference Ranges**
   - Provide normal ranges for lab values
   - Helps interpret abnormal results
   - Include units for reference ranges
   - Match reference range units to value units

3. **Use Standard LOINC Codes**
   - LOINC is required for lab and diagnostic studies
   - Use specific LOINC codes for individual tests
   - Use panel LOINC codes for organizers
   - Ensure codes match the actual test performed

4. **Document Interpretation**
   - Include abnormal flags when available
   - 'N' = Normal, 'A' = Abnormal, 'H' = High, 'L' = Low
   - Helps quickly identify concerning values
   - Supports clinical decision-making

### Validation Tips

1. **Section Code Validation**
   - Ensure section code is 11493-4 (LOINC "Hospital Discharge Studies Summary")
   - This is automatically set by the builder

2. **Organizer Structure**
   - Each organizer contains one or more observations
   - Use Result Organizer template
   - Observations use Result Observation template

3. **LOINC Code Validation**
   - All study codes must be from LOINC
   - Panel codes must be LOINC panel codes
   - Individual test codes must be LOINC observation codes

4. **Value Type Consistency**
   - If unit is provided, use value_type="PQ" (physical quantity)
   - For text results, use value_type="ST" (string)
   - For coded results, use value_type="CD" (coded)

### Common Pitfalls

1. **Missing Units**
   - Always include units for numeric values
   - Units are critical for interpretation
   - Use standardized UCUM units when possible

2. **Inconsistent Reference Ranges**
   - Reference range units must match value units
   - Provide both low and high when available
   - Some tests only have upper or lower limits

3. **Wrong LOINC Codes**
   - Use specific LOINC codes for exact tests
   - Don't use generic or approximated codes
   - Panel codes differ from individual test codes

4. **Mixing Time Precision**
   - Use datetime for timed studies (e.g., serial labs)
   - Use date for studies where exact time isn't critical
   - Be consistent within a panel

5. **Not Grouping Related Tests**
   - Group related tests in organizers
   - Don't create separate organizers for each test
   - Use standard panel groupings when applicable

6. **Missing Interpretations**
   - Include abnormal flags when available
   - Helps receiving providers identify priorities
   - Important for quality of information

## Related Sections

- **Results Section:** Ongoing lab and diagnostic results
- **Diagnostic Imaging Report:** Detailed imaging findings
- **Discharge Diagnosis Section:** Clinical context for studies
- **Plan of Treatment Section:** Follow-up testing needed

## Code Systems and Terminologies

### Study Codes (LOINC - Required)
All study codes must use LOINC:
- **Laboratory Tests:** LOINC codes for specific tests
- **Imaging Studies:** LOINC codes for imaging procedures
- **Panels:** LOINC panel codes for grouped tests

Common LOINC codes:
- **58410-2** - Complete Blood Count panel
- **51990-0** - Basic Metabolic Panel
- **24323-8** - Comprehensive Metabolic Panel
- **2951-2** - Sodium
- **2823-3** - Potassium
- **718-7** - Hemoglobin

### Interpretation Codes
- **N** - Normal
- **A** - Abnormal
- **H** - High (above normal range)
- **L** - Low (below normal range)
- **HH** - Critical high
- **LL** - Critical low

### Status Codes
- **completed** - Study is complete
- **final** - Results are final
- **preliminary** - Preliminary results
- **corrected** - Results have been corrected

### Section Codes
- **Primary:** 11493-4 - "Hospital Discharge Studies Summary" (LOINC)

## Implementation Notes

### Narrative Table Generation

The builder creates a comprehensive table with columns:
- Study Panel (panel name, shown once per panel)
- Study (individual test name)
- Value
- Unit
- Interpretation
- Reference Range
- Date

### Result Organizer Reuse

The section reuses the Result Organizer pattern:
- Same structure as Results Section
- DischargeStudyOrganizerProtocol is compatible with ResultOrganizerProtocol
- Leverages existing Result builders

### Panel-Based Organization

Studies are organized by panels:
- Each panel becomes one organizer
- Organizer contains related observations
- Grouping matches clinical workflow

### Value Types

Three value types are supported:
- **PQ (Physical Quantity):** Numeric with units (e.g., "140 mg/dL")
- **ST (String):** Text results (e.g., "Normal")
- **CD (Coded):** Coded results using standard terminologies

### Reference Ranges

Reference ranges help interpretation:
- Provide context for values
- May be patient-specific or population-based
- Should include units
- Can have only upper or lower bound

### Timing Flexibility

Effective time can be date or datetime:
- **datetime:** For precise timing (serial labs)
- **date:** For studies where exact time isn't critical
- Builder handles both formats

### Integration with Discharge Summary

The Hospital Discharge Studies Summary complements:
- **Discharge Diagnosis:** Clinical assessment
- **Hospital Course:** Narrative of hospital stay
- **Discharge Medications:** Based on discharge lab values
- **Follow-up Plans:** May include repeat testing

### Scope of Studies

The section includes:
- **Hematology:** Blood counts, coagulation studies
- **Chemistry:** Electrolytes, renal function, liver function
- **Serology/Virology:** Infectious disease testing
- **Toxicology:** Drug levels, poisoning tests
- **Microbiology:** Culture results
- **Imaging:** X-ray, CT, MRI, ultrasound findings
- **Cardiac:** ECG, echocardiogram, stress test
- **Nuclear Medicine:** PET, nuclear scans
- **Pathology:** Biopsy results, surgical pathology

### Discharge vs. Ongoing Results

**Use Hospital Discharge Studies Summary for:**
- Studies performed at or near discharge
- Results needed for immediate post-discharge care
- Key findings that inform discharge planning

**Use Results Section for:**
- Longitudinal lab tracking
- All results during hospital stay
- Comprehensive test history

### Clinical Decision Support

Discharge studies inform:
- Medication adjustments at discharge
- Need for follow-up testing
- Risk stratification for post-discharge complications
- Transitions of care planning
- Patient education about ongoing monitoring

### LOINC Code Selection

Tips for selecting LOINC codes:
- Use search.loinc.org for official codes
- Be specific about specimen type (blood, urine, etc.)
- Include method when relevant
- Use the most specific code available
- Panel codes aggregate related tests

### Empty Section Handling

If no discharge studies available:
```python
section = HospitalDischargeStudiesSummarySection(
    study_organizers=[],
    version=CDAVersion.R2_1
)
```

This generates narrative: "No discharge studies available"
